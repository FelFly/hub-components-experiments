System.register(["./p-efd827df.system.js"],(function(t){"use strict";var e,r,n,i,o;return{setters:[function(t){e=t.c;r=t._;n=t.r;i=t.a;o=t.w}],execute:function(){t({a:d,b:a,c:q,d:M,e:j,f:E,g:p,h:G,i:P,j:k,k:y,l:b,m:l,n:m,o:I,p:f,q:S,r:g,s:T,u:c});function a(t){if(t===void 0){t={}}if(t.portal){return e(t.portal)}if(t.authentication){return t.authentication.portal}return"https://www.arcgis.com/sharing/rest"}function s(t){var e=JSON.parse(JSON.stringify(t));if(e.data){typeof Blob!=="undefined"&&t.data instanceof Blob||t.data.constructor.name==="ReadStream"?e.file=t.data:e.text=t.data;delete e.data}return e}function u(t){if(t.owner){return Promise.resolve(t.owner)}else if(t.item&&t.item.owner){return Promise.resolve(t.item.owner)}else if(t.authentication&&t.authentication.getUsername){return t.authentication.getUsername()}else{return Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}}function c(t){return u(t).then((function(e){var i=a(t)+"/content/users/"+e+"/items/"+t.item.id+"/update";t.params=r({},t.params,s(t.item));return n(i,t)}))}function f(t){return u(t).then((function(e){var o=a(t)+"/content/users/"+e+"/items/"+t.id+"/addPart";var s=i(t,["file","partNum"],{params:r({},t.params)});return n(o,s)}))}function h(t){if(t.file&&!t.multipart){return Promise.reject(new Error("The request must be a multipart request for file uploading."))}if(t.multipart&&!t.filename){return Promise.reject(new Error("The file name is required for a multipart request."))}return u(t).then((function(e){var o=a(t)+"/content/users/"+e;var u=o+"/addItem";if(t.folderId){u=o+"/"+t.folderId+"/addItem"}t.params=r({},t.params,s(t.item));var c=i(t,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:r({},t.params)});return n(u,c)}))}function m(t){var e=r({folderId:null},t);return h(e)}function p(t,e){var i=a(e)+"/content/items/"+t;var o=r({httpMethod:"GET"},e);return n(i,o)}function d(t,e){var i=a(e)+"/content/items/"+t+"/data";var o=r({httpMethod:"GET",params:{}},e);if(o.file){o.params.f=null}return n(i,o).catch((function(t){var e=RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i);if(e.test(t.message)){return}else throw t}))}function l(t,e){var r=a(e)+"/content/items/"+t+"/groups";return n(r,e)}function g(t){return u(t).then((function(e){var o=a(t)+"/content/users/"+e+"/items/"+t.id+"/status";var s=i(t,["jobId","jobType"],{params:r({},t.params)});return n(o,s)}))}function y(t,e){var i=a(e)+"/community/groups/"+t;var o=r({httpMethod:"GET"},e);return n(i,o)}var v=function(){function t(t){if(t===void 0){t=""}this.termStack=[];this.rangeStack=[];this.openGroups=0;this.q=t}t.prototype.match=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}this.termStack=this.termStack.concat(t);return this};t.prototype.in=function(t){var e="`in("+(t?'"'+t+'"':"")+")`";if(!this.hasRange&&!this.hasTerms){o(e+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified.");return this}if(t&&t!=="*"){this.q+=t+":"}return this.commit()};t.prototype.startGroup=function(){this.commit();if(this.openGroups>0){this.q+=" "}this.openGroups++;this.q+="(";return this};t.prototype.endGroup=function(){if(this.openGroups<=0){o("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified.");return this}this.commit();this.openGroups--;this.q+=")";return this};t.prototype.and=function(){return this.addModifier("and")};t.prototype.or=function(){return this.addModifier("or")};t.prototype.not=function(){return this.addModifier("not")};t.prototype.from=function(t){if(this.hasTerms){o("`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified.");return this}this.rangeStack[0]=t;return this};t.prototype.to=function(t){if(this.hasTerms){o("`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Your query was not modified.");return this}this.rangeStack[1]=t;return this};t.prototype.boost=function(t){this.commit();this.q+="^"+t;return this};t.prototype.toParam=function(){this.commit();this.cleanup();return this.q};t.prototype.clone=function(){this.commit();this.cleanup();return new t(this.q+"")};t.prototype.addModifier=function(t){if(this.currentModifer){o("You have called `"+this.currentModifer+"()` after `"+t+"()`. Your current query was not modified.");return this}this.commit();if(this.q===""&&t!=="not"){o("You have called `"+t+"()` without calling another method to modify your query first. Try calling `match()` first.");return this}this.currentModifer=t;this.q+=this.q===""?"":" ";this.q+=t.toUpperCase()+" ";return this};t.prototype.hasWhiteSpace=function(t){return/\s/g.test(t)};t.prototype.formatTerm=function(t){if(t instanceof Date){return t.getTime()}if(typeof t==="string"&&this.hasWhiteSpace(t)){return'"'+t+'"'}return t};t.prototype.commit=function(){var t=this;this.currentModifer=undefined;if(this.hasRange){this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]";this.rangeStack=[undefined,undefined]}if(this.hasTerms){this.q+=this.termStack.map((function(e){return t.formatTerm(e)})).join(" ");this.termStack=[]}return this};Object.defineProperty(t.prototype,"hasTerms",{get:function(){return this.termStack.length>0},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:true,configurable:true});t.prototype.cleanup=function(){if(this.openGroups>0){o("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");while(this.openGroups>0){this.q+=")";this.openGroups--}}var t=this.q;this.q=t.replace(/( AND ?| NOT ?| OR ?)*$/,"");if(t!==this.q){o("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified.")}this.q=this.q.replace(/(\(\))*/,"")};return t}();function w(t,e){var r;var o;if(typeof t==="string"||t instanceof v){o={httpMethod:"GET",params:{q:t}}}else{o=i(t,["q","num","start","sortField","sortOrder"],{httpMethod:"GET"})}var s;switch(e){case"item":s="/search";break;case"group":s="/community/groups";break;case"groupContent":if(typeof t!=="string"&&!(t instanceof v)&&t.groupId){s="/content/groups/"+t.groupId+"/search"}else{return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"))}break;default:s="/portals/self/users/search";break}r=a(o)+s;return n(r,o).then((function(r){if(r.nextStart&&r.nextStart!==-1){r.nextPage=function(){var n;if(typeof t==="string"||t instanceof v){n={q:t,start:r.nextStart}}else{n=t;n.start=r.nextStart}return w(n,e)}}return r}))}function q(t){return w(t,"item")}function S(t){return u(t).then((function(e){var r=a(t)+"/content/users/"+e+"/items/"+t.id+"/commit";return n(r,t)}))}function G(t){return w(t,"group")}function T(t){return w(t,"groupContent")}function k(t){var e=a(t)+"/community/groups/"+t.id+"/join";return n(e,t)}function b(t){var e=a(t)+"/community/groups/"+t.id+"/leave";return n(e,t)}function M(t){var e;var i={httpMethod:"GET"};if(typeof t==="string"){e="https://www.arcgis.com/sharing/rest/community/users/"+t}else{var o=t.username||t.authentication.username;e=a(t)+"/community/users/"+encodeURIComponent(o);i=r({},t,i)}return n(e,i)}function I(t){return a(t)+"/community/users/"+encodeURIComponent(t.username)}function j(t){return w(t,"user")}function E(t){var e=t.user.username||t.authentication.username;var i=a(t)+"/community/users/"+encodeURIComponent(e)+"/update";t.params=r({},t.user,t.params);delete t.user;return n(i,t)}function P(t,e){var i=t?t:"self";var o=a(e)+"/portals/"+i;var s=r({httpMethod:"GET"},e);return n(o,s)}}}}));