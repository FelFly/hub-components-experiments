var __awaiter=this&&this.__awaiter||function(t,e,n,o){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function s(t){try{a(o.next(t))}catch(e){i(e)}}function c(t){try{a(o["throw"](t))}catch(e){i(e)}}function a(t){t.done?n(t.value):r(t.value).then(s,c)}a((o=o.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,r,i,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(t){return function(e){return a([t,e])}}function a(s){if(o)throw new TypeError("Generator is already executing.");while(n)try{if(o=1,r&&(i=s[0]&2?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;if(r=0,i)s=[s[0]&2,i.value];switch(s[0]){case 0:case 1:i=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;r=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(i=n.trys,i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){n.label=s[1];break}if(s[0]===6&&n.label<i[1]){n.label=i[1];i=s;break}if(i&&n.label<i[2]){n.label=i[2];n.ops.push(s);break}if(i[2])n.ops.pop();n.trys.pop();continue}s=e.call(t,n)}catch(c){s=[6,c];r=0}finally{o=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-bda334d9.system.js","./p-ad2aa800.system.js","./p-0f2b0e97.system.js","./p-635da667.system.js","./p-25515151.system.js","./p-723eb060.system.js","./p-69e00f75.system.js"],(function(t){"use strict";var e,n,o,r,i,s,c,a,u,l,f;return{setters:[function(t){e=t.r;n=t.h;o=t.H},function(){},function(t){r=t.m;i=t.d;s=t.n;c=t.g;a=t.a},function(){},function(t){u=t.a},function(t){l=t.U},function(t){f=t.a}],execute:function(){var h={create:function(t){switch(t){case"portal":return new p;case"hub":return new b}}};var p=function(){function t(){this.portalUrl="https://www.arcgis.com/share/rest/"}t.prototype.canEdit=function(t,e){return Promise.all([r(t),i(e)]).then((function(t){var e=t[0],n=t[1];var o=e.member.filter((function(t){return n.groups.includes(t)}));return o.length>0}))};t.prototype.search=function(t){return u({q:t})};t.prototype.create=function(t,e){return s({item:t,authentication:e})};t.prototype.get=function(t){return Promise.all([c(t),a(t)]).then((function(t){var e=t[0],n=t[1];e.data=n;return e}))};t.prototype.update=function(t,e){return new Promise((function(t,e){return e(false)}))};t.prototype.delete=function(t){return new Promise((function(t,e){return e(false)}))};return t}();var b=function(){function t(){this.hubUrl="https://hub.arcgis.com/api/v3"}t.prototype.canEdit=function(t,e){return fetch(this.hubUrl+"/content/"+t,{method:"GET"}).then((function(t){if(t.status==200){return true}else{return false}}))};t.prototype.search=function(t){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(n){switch(n.label){case 0:return[4,fetch(this.hubUrl+"/search",{method:"GET",body:JSON.stringify(t)})];case 1:e=n.sent();return[2,e.json()]}}))}))};t.prototype.create=function(t,e){delete t.id;delete t.owner;delete t.orgId;return s({item:t,authentication:e})};t.prototype.get=function(t){return Promise.all([c(t),a(t)]).then((function(t){var e=t[0],n=t[1];e.data=n;return e}))};t.prototype.update=function(t,e){return new Promise((function(t,e){return e(false)}))};t.prototype.delete=function(t){return new Promise((function(t,e){return e(false)}))};return t}();var d=":host{display:block;width:100%;height:100%}iframe{border:none;width:100%;height:100%}.notebook-copy-button{float:right;margin:10px 33px 0 0}.notebook-title{margin-left:33px;float:left}";var y=t("arcgis_notebook",function(){function t(t){e(this,t);this.item="9cd1f9bdc6794e63ae450087b3b67e05";this.view="preview";this.clientid="WXC842NRBVB6NZ2r";this.portal="https://www.arcgis.com"}t.prototype.componentDidLoad=function(){var t=this;if(this.view=="edit"){this.getEdit()}else{this.getPreview()}var e=h.create("hub");e.get(this.item).then((function(e){console.log("Notebook",e);t.notebook=e;t.titleEl.innerText=e.title}))};t.prototype.getEdit=function(){var t=this.portal+"/home/notebook/notebook.html?id="+this.item;console.debug("ArcGIS Notebook getEdit",t);this.iFrameEl.src=t};t.prototype.getPreview=function(){var t=this;var e="notebook_preview.json";var n=this.portal+"/sharing/rest/content/items/"+this.item+"/resources/"+e;console.log("Notebook getPreview",n);fetch(n).then((function(e){e.json().then((function(e){var n=e.html.indexOf("<body>")+6;e.html=e.html.slice(0,n)+"<style>#notebook-container { box-shadow: none; -webkit-box-shadow: none; padding: 0; }</style>"+e.html.slice(n);var o=t.iFrameEl.contentWindow.document;o.open();o.write(e.html);o.close()}))})).catch((function(t){console.error("Error in arcgis-notebook getPreview",t)}))};t.prototype.onCopy=function(t){var e=this;return f(this.clientid,this.portal).then((function(t){e.session=t;return e.copyNotebook()}))};t.prototype.copyNotebook=function(){console.log("onCopy starting",this.notebook);var t=h.create("hub");t.create(this.notebook,l.deserialize(this.session)).then((function(t){console.log("onCopy Done",t)}))};t.prototype.render=function(){var t=this;return n(o,null,n("h3",{id:"notebook-title",ref:function(e){return t.titleEl=e}}),n("span",{class:"notebook-title"},n("slot",{name:"title"})),n("hub-button",{class:"notebook-copy-button",color:"dark",text:"Copy Notebook",action:this.onCopy}),n("iframe",{src:"",id:"notebook-iframe",ref:function(e){return t.iFrameEl=e}}))};return t}());y.style=d}}}));