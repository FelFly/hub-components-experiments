var __awaiter=this&&this.__awaiter||function(e,t,a,s){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,r){function i(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s["throw"](e))}catch(t){r(t)}}function l(e){e.done?a(e.value):n(e.value).then(i,o)}l((s=s.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var a={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,n,r,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(e){return function(t){return l([e,t])}}function l(i){if(s)throw new TypeError("Generator is already executing.");while(a)try{if(s=1,n&&(r=i[0]&2?n["return"]:i[0]?n["throw"]||((r=n["return"])&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;if(n=0,r)i=[i[0]&2,r.value];switch(i[0]){case 0:case 1:r=i;break;case 4:a.label++;return{value:i[1],done:false};case 5:a.label++;n=i[1];i=[0];continue;case 7:i=a.ops.pop();a.trys.pop();continue;default:if(!(r=a.trys,r=r.length>0&&r[r.length-1])&&(i[0]===6||i[0]===2)){a=0;continue}if(i[0]===3&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(i[0]===6&&a.label<r[1]){a.label=r[1];r=i;break}if(r&&a.label<r[2]){a.label=r[2];a.ops.push(i);break}if(r[2])a.ops.pop();a.trys.pop();continue}i=t.call(e,a)}catch(o){i=[6,o];n=0}finally{s=r=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};System.register(["./p-bda334d9.system.js","./p-dc03120e.system.js","./p-efd827df.system.js","./p-adc488b3.system.js","./p-8acf3331.system.js","./p-be68bc4b.system.js","./p-f8ddaf1f.system.js","./p-f6d2a683.system.js","./p-b4b7d6a2.system.js","./p-430ab16f.system.js","./p-685036c5.system.js"],(function(e){"use strict";var t,a,s,n,r,i,o,l,c,u,h,m,p;return{setters:[function(e){t=e.r;a=e.h;s=e.H},function(e){n=e.H},function(){},function(){},function(){},function(){},function(){},function(e){r=e.U},function(){},function(e){i=e.h;o=e.i;l=e.j;c=e.k;u=e.l;h=e.m},function(e){m=e.r;p=e.t}],execute:function(){var d=':host{display:block}.workspace-grid{display:grid;grid-template-columns:15% 30% 30% 25%;grid-template-rows:auto;grid-template-areas:"avatar bio map ."\n    "interests teams teams events";-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px;row-gap:20px;padding:0 1rem 0 3rem}.workspace-avatar{grid-area:avatar}img.avatar{border-radius:50%}.workspace-bio{grid-area:bio}.workspace-map{grid-area:map;height:200px}.workspace-interests{grid-area:interests}.workspace-events{grid-area:events}.workspace-teams{grid-area:teams;}@media screen and (max-width: 530px){.gallery-card{width:calc((100% - (0 * 30px))/ 1)}}@media screen and (min-width: 530px) and (max-width: 975px){.gallery-card{width:calc((100% - (1 * 30px))/ 2)}}@media screen and (min-width: 975px) and (max-width: 1200px){.gallery-card{width:calc((100% - (2 * 30px))/ 3)}}@media screen and (min-width:1200px){.gallery-card{width:calc((100% - (3 * 30px))/ 4)}}.gallery{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:30px;-ms-flex-pack:justify;justify-content:space-between}.gallery-card{-ms-flex:1;flex:1;width:32%;color:#4c4c4c;-webkit-box-shadow:0 0 5px 0 rgba(76,76,76,.25);box-shadow:0 0 5px 0 rgba(76,76,76,.25);margin-right:10px;}.gallery-header,h3,h4{border-bottom:1px solid #888;margin-bottom:3px;width:100%}.gallery-header a,.gallery-header h4,.gallery-header h2{display:inline}.gallery-header a{text-decoration:none;color:#448}a.explore{float:right;font-size:0.8em;margin-top:5px}.gallery-header a:hover{text-decoration:underline}.team-gallery{padding:24px;margin:16px 0;width:auto;-webkit-box-shadow:0 0 0 1px rgba(0,0,0,.15), 0 2px 3px rgba(0,0,0,.2);box-shadow:0 0 0 1px rgba(0,0,0,.15), 0 2px 3px rgba(0,0,0,.2);-webkit-transition:-webkit-box-shadow 83ms;transition:-webkit-box-shadow 83ms;transition:box-shadow 83ms;transition:box-shadow 83ms, -webkit-box-shadow 83ms}';var f=e("hub_workspace",function(){function e(e){t(this,e)}e.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,a,s,n;var p;return __generator(this,(function(d){switch(d.label){case 0:this.session=m();e=r.deserialize(this.session);console.log("Session",this.session);if(!!!this.session)return[3,8];t=JSON.parse(this.session).username;s=(a=Promise).all;return[4,i(t,e)];case 1:n=[d.sent()];return[4,o(e)];case 2:n=n.concat([d.sent()]);return[4,l(e)];case 3:n=n.concat([d.sent()]);return[4,c(t,e)];case 4:n=n.concat([d.sent()]);return[4,u(t,e)];case 5:n=n.concat([d.sent()]);return[4,h(t,e)];case 6:return[4,s.apply(a,[n.concat([d.sent()])])];case 7:p=d.sent(),this.member=p[0],this.teams=p[1],this.events=p[2],this.places=p[3],this.content=p[4],this.comments=p[5];console.log("Workspace: Events",this.events);d.label=8;case 8:return[2]}}))}))};e.prototype.dateToText=function(e){var t=new Intl.DateTimeFormat("en",{year:"numeric",month:"short",day:"2-digit"});var a=t.formatToParts(e),s=a[0].value,n=a[2].value,r=a[4].value;return n+"-"+s+"-"+r};e.prototype.render=function(){var e=this;var t;var r=[];if(this.session!==undefined){r.push(a("div",{class:"workspace-grid"},a("div",{class:"workspace-avatar"},a("img",{src:this.member.thumbnailUrl,class:"avatar",alt:"Profile Image"})),a("div",{class:"workspace-bio"},a("h1",null,this.member.name),a("p",null,this.member.summary),a("em",null,"Joined ",this.dateToText(this.member.createdDate))),a("div",{class:"workspace-map"},a("hub-places-map",{mode:"view",session:this.session})),a("div",{class:"workspace-interests"},a("h3",null,"Stats"),a("hub-statistic",{size:"m",value:this.teams.meta.total,units:"Teams"}),a("hub-statistic",{size:"m",value:this.events.meta.total,units:"Events"}),a("hub-statistic",{size:"m",value:this.content.meta.total,units:"Content Items"}),a("hub-statistic",{size:"m",value:this.places.length,units:"Places"}),a("hub-statistic",{size:"m",value:this.comments.length,units:"Comments"}),a("h3",null,"Interests"),(t=this.member.metadata)===null||t===void 0?void 0:t.interests.map((function(e){return a("calcite-chip",{value:e},e)})),a("h3",null,"Places"),this.places.map((function(e){return a("calcite-chip",{value:e.name},e.name," (",e.coverage,")")}))),a("div",{class:"workspace-events"},a("h3",null,"Upcoming Events"),a("hub-events-list",{session:this.session}),a("hub-list",{collection:this.teams.results},a("h3",null,"Your Teams"))),a("div",{class:"workspace-teams"},a("div",{class:"gallery-header"},a("h2",null,"My Content"),a("a",{class:"explore",href:"#"},"See all>")),a("div",{class:"gallery"},this.content.results.slice(0,4).map((function(e){return a("hub-card",{class:"gallery-card",contenttype:n[e.hubType]+" by "+e.publisher.name,image:e.thumbnailUrl,name:p(e.name,55),description:p(e.summary,90),url:e.url,buttonText:"View "+n[e.hubType],onClick:function(){return""}})}))),a("h2",null,"Your Teams"),this.teams.results.slice(0,8).map((function(t){return a("div",{class:"team-gallery"},a("div",{class:"gallery-header"},a("h4",null,a("a",{href:t.url},t.name," >"))),a("hub-gallery",{session:e.session,limit:4,groups:t.id,showsearch:false,sort:"modified",hubtype:"content"}))})))))}else{r.push(a("calcite-loader",{text:"Fetching workspace...","is-active":true}))}return a(s,null,a("slot",null),r)};return e}());f.style=d}}}));