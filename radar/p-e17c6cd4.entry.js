import{r as t,c as i,h as e,H as a,g as s}from"./p-1fd9320b.js";import{g as o}from"./p-7bc17319.js";import{g as r}from"./p-01f41a03.js";import{g as n,d as c,a as h,b as l,p as d,i as u}from"./p-e88c8ca5.js";const p=class{constructor(e){t(this,e),this.active=!1,this.prevMonthLabel="previous month",this.nextMonthLabel="next month",this.locale="en-US",this.noCalendarInput=!1,this.scale="m",this.localeData=n(this.locale),this.hasShadow=!!document.head.attachShadow,this.syncThisToProxyInput=()=>{this.min=this.inputProxy.min,this.max=this.inputProxy.max;const t=c(this.min),i=c(this.max),e=c(this.inputProxy.value);this.valueAsDate=h(e,t,i),this.value=l(this.valueAsDate)},this.syncProxyInputToThis=()=>{this.inputProxy&&(this.inputProxy.value=this.value||"",this.min&&(this.inputProxy.min=this.min),this.max&&(this.inputProxy.max=this.max))},this.calciteDateChange=i(this,"calciteDateChange",7)}focusOutHandler(){this.reset()}focusInHandler(t){this.hasShadow||this.el.contains(t.srcElement)||this.reset()}keyDownHandler(t){"Escape"===r(t.key)&&this.reset()}connectedCallback(){this.setupProxyInput()}disconnectedCallback(){this.observer.disconnect()}componentWillRender(){this.syncProxyInputToThis()}render(){const t=c(this.min),i=c(this.max),s=h(this.valueAsDate,t,i),r=this.getActiveDate(s,t,i),n=s?s.toLocaleDateString(this.locale):"",l=o(this.el);return e(a,{role:"application",dir:l},e("div",{class:"slot"},e("slot",null)),!this.noCalendarInput&&e("div",{role:"application"},e("calcite-input",{type:"text",value:n,placeholder:this.localeData.placeholder,icon:"calendar",onCalciteInputFocus:()=>this.active=!0,onCalciteInputInput:t=>this.input(t.detail.value),onCalciteInputBlur:t=>this.blur(t.detail),scale:this.scale,"number-button-type":"none",class:"input"})),e("div",{class:"calendar-picker-wrapper"},e("calcite-date-month-header",{activeDate:r,selectedDate:s||new Date,prevMonthLabel:this.prevMonthLabel,nextMonthLabel:this.nextMonthLabel,locale:this.locale,min:t,max:i,onCalciteActiveDateChange:t=>{this.activeDate=new Date(t.detail)},dir:l,scale:this.scale}),e("calcite-date-month",{min:t,max:i,selectedDate:s,activeDate:r,locale:this.locale,onCalciteDateSelect:t=>{this.setValue(new Date(t.detail)),this.activeDate=new Date(t.detail),this.calciteDateChange.emit(new Date(t.detail)),this.reset()},onCalciteActiveDateChange:t=>{this.activeDate=new Date(t.detail)},dir:l,scale:this.scale})))}setupProxyInput(){if(this.inputProxy=this.el.querySelector("input"),!this.inputProxy){this.inputProxy=document.createElement("input");try{this.inputProxy.type="date"}catch(t){this.inputProxy.type="text"}this.syncProxyInputToThis(),this.el.appendChild(this.inputProxy)}this.syncThisToProxyInput(),this.observer=new MutationObserver(this.syncThisToProxyInput),this.observer.observe(this.inputProxy,{attributes:!0})}setValue(t){this.valueAsDate=new Date(t),this.value=t.toISOString().split("T")[0],this.syncProxyInputToThis()}reset(){this.valueAsDate&&(this.activeDate=new Date(this.valueAsDate)),this.noCalendarInput||(this.active=!1)}input(t){const i=this.getDateFromInput(t);i&&(this.setValue(i),this.activeDate=i,this.calciteDateChange.emit(new Date(i)))}blur(t){!this.getDateFromInput(t.value)&&this.valueAsDate&&(t.value=this.valueAsDate.toLocaleDateString(this.locale))}getActiveDate(t,i,e){return h(this.activeDate,i,e)||t||h(new Date,i,e)}getDateFromInput(t){const{separator:i}=this.localeData,{day:e,month:a,year:s}=d(t,this.locale),o=e>0,r=a>-1,n=new Date(s,a,e),c=!isNaN(n.getTime()),h=t.split(i).filter(t=>t).length>2,l=s.toString().length>3;return!!(o&&r&&c&&h&&l&&u(n,this.min,this.max))&&n}get el(){return s(this)}};p.style=":host([hidden]){display:none}:host-context([theme=dark]){--calcite-ui-blue-1:#00A0FF;--calcite-ui-blue-2:#0087D7;--calcite-ui-blue-3:#47BBFF;--calcite-ui-green-1:#36DA43;--calcite-ui-green-2:#11AD1D;--calcite-ui-green-3:#44ED51;--calcite-ui-yellow-1:#FFC900;--calcite-ui-yellow-2:#F4B000;--calcite-ui-yellow-3:#FFE24D;--calcite-ui-red-1:#FE583E;--calcite-ui-red-2:#F3381B;--calcite-ui-red-3:#FF7465;--calcite-ui-background:#202020;--calcite-ui-foreground-1:#2b2b2b;--calcite-ui-foreground-2:#353535;--calcite-ui-foreground-3:#404040;--calcite-ui-text-1:#ffffff;--calcite-ui-text-2:#bfbfbf;--calcite-ui-text-3:#9f9f9f;--calcite-ui-border-1:#4a4a4a;--calcite-ui-border-2:#404040;--calcite-ui-border-3:#353535;--calcite-ui-border-4:#757575;--calcite-ui-border-5:#9f9f9f}:host{display:inline-block;vertical-align:top;width:100%;position:relative;overflow:visible}.slot{display:none}:host([scale=s]){max-width:216px}:host([scale=m]){max-width:286px}:host([scale=l]){max-width:398px}.calendar-icon{color:var(--calcite-ui-text-3);position:absolute;top:50%;margin:-8px 0.75rem;pointer-events:none}.calendar-picker-wrapper{position:absolute;top:100%;background-color:var(--calcite-ui-foreground-1);-webkit-box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);opacity:0;width:100%;line-height:0;visibility:hidden;overflow:visible;-webkit-transform:translate3d(0, -1.5rem, 0);transform:translate3d(0, -1.5rem, 0);-webkit-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out;pointer-events:none;z-index:3}.input .calcite-input-wrapper{margin-top:0}:host([active]){background-color:var(--calcite-ui-foreground-1);border-radius:var(--calcite-border-radius);-webkit-box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16)}:host([active]) .calendar-picker-wrapper{opacity:1;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);visibility:visible;pointer-events:initial}:host([active]) .date-input-wrapper{border:1px solid var(--calcite-ui-foreground-1);border-bottom:1px solid var(--calcite-ui-border-3)}:host([no-calendar-input]){-webkit-box-shadow:none;box-shadow:none}:host([no-calendar-input]) .calendar-picker-wrapper{position:static;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);border-radius:none;-webkit-box-shadow:none;box-shadow:none;border:1px solid var(--calcite-ui-border-2)}";export{p as calcite_date}