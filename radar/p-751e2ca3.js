import{u as e}from"./p-ae78f844.js";import{g as t,a as i}from"./p-2c58a2fe.js";var n,a,r,s,o,u;!function(e){e[e.dataset=1e3]="dataset",e[e.document=1001]="document",e[e.map=1002]="map",e[e.app=1003]="app",e[e.site=1004]="site",e[e.initiative=1005]="initiative",e[e.template=1006]="template"}(n||(n={})),function(e){e[e.member=1]="member",e[e.team=2]="team"}(a||(a={})),function(e){e[e.private=0]="private",e[e.org=1]="org",e[e.public=2]="public"}(r||(r={})),function(e){e[e.view=0]="view",e[e.edit=1]="edit",e[e.admin=2]="admin"}(s||(s={})),function(e){e[e.event=0]="event"}(o||(o={})),function(e){e[e.member=1]="member",e[e.team=2]="team",e[e.event=100]="event",e[e.dataset=1e3]="dataset",e[e.document=1001]="document",e[e.map=1002]="map",e[e.app=1003]="app",e[e.site=1004]="site",e[e.initiative=1005]="initiative",e[e.template=1006]="template",e[e.organization=1007]="organization"}(u||(u={}));const m="https://www.arcgis.com/sharing/rest/";function c(e,t){return void 0!==t&&t.isPortal?p(e,t):function(e,t){return function(e,t){let i="https://hub.arcgis.com/api",n={};return void 0!==t&&void 0!==t.hubApiUrl&&void 0!==t.authentication&&(i=t.hubApiUrl,n.Authorization=t.authentication.token),fetch(`${i}/v3/datasets/${e}`,{method:"GET",mode:"cors",headers:n}).then(e=>e.json()).then(e=>e).catch(e=>{throw Error("getFromHubAPI: Error requesting from Hub API: "+e)})}(e,t).then(e=>{let t=l(e.data);return new Promise(e=>{e(t)})}).catch(i=>{if(403==i.status)return p(e,t)})}(e,t)}async function d(t,i,n){return e({item:Object.assign({id:t},i),authentication:n}),c(t)}function p(e,i){return t(e,i).then(e=>new Promise(t=>{t(f(e))}))}function f(e){let t=i(e.item.type),n=Object.assign(e.item,{name:e.item.title,hubType:u[t],summary:e.item.snippet,publisher:{name:e.item.owner,username:e.item.owner},permissions:{visibility:e.item.access,permission:e.item.itemControl||s.view},contentUrl:e.item.url,license:{name:"Custom License",description:e.item.accessInformation},createdDate:new Date(e.item.created),createdDateSource:"item.created",publishedDate:new Date(e.item.created),publishedDateSource:"item.created",updatedDate:new Date(e.item.modified),updatedDateSource:"item.modified"});return null!=e.item.thumbnail?n.thumbnailUrl=`${m}content/items/${e.item.id}/info/${e.item.thumbnail}`:"Image"===e.item.type&&(n.thumbnailUrl=`${m}content/items/${e.item.id}/data`),n}function l(e){let t=i(e.attributes.type),n={id:e.id,title:e.attributes.name,snippet:e.attributes.searchDescription,owner:e.attributes.owner,description:e.attributes.description,tags:e.attributes.tags,created:e.attributes.created,numViews:0,modified:e.attributes.modified,size:e.attributes.size,type:e.attributes.type,url:e.attributes.url,name:e.attributes.name,hubType:u[t],summary:(e.attributes.searchDescription||"").slice(0,200),publisher:{name:e.attributes.owner,username:e.attributes.owner},permissions:{visibility:e.attributes.access},contentUrl:e.attributes.url,license:{name:"Custom License",description:e.attributes.accessInformation},createdDate:new Date(e.attributes.created),createdDateSource:"item.created",publishedDate:new Date(e.attributes.created),publishedDateSource:"item.created",updatedDate:new Date(e.attributes.modified),updatedDateSource:"item.modified"};return null!=e.attributes.thumbnail?n.thumbnailUrl=`${m}content/items/${e.id}/info/${e.attributes.thumbnail}`:"Image"===e.attributes.type&&(n.thumbnailUrl=`${m}content/items/${e.id}/data`),n}export{a as C,u as H,r as V,f as _,l as a,c as g,d as u}